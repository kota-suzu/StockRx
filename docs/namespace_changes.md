# 名前空間とディレクトリ構造のリファクタリング

## 変更内容のまとめ（2024年XX月XX日実施）

1. コントローラ名前空間をより明確に定義
   - `Admin`モデルとの名前衝突を避けるために`AdminControllers`モジュールを使用
   - ルーティング設定を`namespace :admin, module: :admin_controllers`に統一

2. ディレクトリ構造をモジュール名に一致させる
   - `app/controllers/admin/` → `app/controllers/admin_controllers/` に統一
   - `app/views/admin/` → `app/views/admin_controllers/` に統一

3. Deviseのビューパスを修正
   - 各ビューファイル内のレンダリングパスを `admins/` から `admin_controllers/` に変更

## 変更の目的

1. Railsのオートローディング機能を正しく動作させる
   - モジュール名とディレクトリ構造の一致が必要
   - `uninitialized constant` エラーの回避

2. 命名の競合を解決
   - 同じ名前空間に異なる種類（モデルとモジュール）の定義が存在すると競合する
   - より具体的な名前を使用して混乱を避ける

3. 統一性の確保
   - 同じ機能に関連するコードが同じ場所に配置されるように整理
   - メンテナンス性と可読性の向上

## 注意点

1. 今後新たなモデルを追加する場合
   - 対応するコントローラには「Controllers」サフィックスを含む名前空間を使用する
   - 例: `User`モデル → `UserControllers`モジュール

2. 新たなコントローラとビューを追加する場合
   - 正しいディレクトリ構造に従う
   - モジュール名とディレクトリ名を一致させる

3. Deviseカスタマイズにおける注意点
   - コントローラの場所を変更した場合は`config/routes.rb`の`controllers:`オプションも更新
   - ビューのレンダリングパスも一貫して修正

## 完了事項

- [x] 重複ディレクトリの削除（`app/controllers/admin/`）
- [x] ビューファイルのコピーと参照パスの更新
- [x] 各コントローラへの機能拡張TODOコメントの追加
- [x] ドキュメントの更新

## 参考

Railsにおける名前空間の設計については、以下のベストプラクティスを参考にしています：

- 名前空間の衝突を避けるため、モデルとコントローラの名前空間は別々に設計する
- ルーティングのパスと内部的なモジュール名は必ずしも一致させる必要はない
- `namespace` メソッドの `module` オプションを使うことで、URLパスと内部モジュール名を独立して設定できる
- Deviseのビューカスタマイズでは、コントローラと対応するビューディレクトリ構造を一致させる 