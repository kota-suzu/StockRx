# StockRx 開発計画書・タスク管理

> **最終更新**: 2025年5月26日  
> **管理者**: フルスタック開発チーム  
> **ステータス**: 積極的開発中

## 📊 プロジェクト概要

### 完了済み機能（✅ 実装済み）

#### ヘルパー機能のベストプラクティス実装
- [x] ビューファイル内のヘルパーメソッド定義を適切なヘルパーファイルに移動
- [x] AdminControllers::InventoriesHelper への統合
- [x] ソートアイコン機能の追加（sort_icon_for メソッド）
- [x] 重複ヘルパーファイルの削除・整理
- [x] RuboCop コード品質チェック対応
- [x] 包括的なヘルパーテストの実装

#### コード品質・開発環境改善
- [x] Makefile の最適化（TODOコメント整理、新機能追加）
- [x] `make server` コマンドの追加
- [x] ヘルパー・デコレーター・バリデーター専用テストコマンド
- [x] コード品質チェック専用コマンド
- [x] ヘルプメッセージの改善（絵文字・カテゴリ分け）

---

## 🚧 進行中機能（作業中）

### CSV一括インポート機能の安定性向上
- [ ] ファイル形式バリデーション（サイズ制限：10MB、MIME type、文字エンコーディング）
- [ ] カラム数・形式の事前検証
- [ ] エラーハンドリングの強化（部分的失敗時の処理）
- [ ] インポート進捗の詳細表示機能
- [ ] ActionCable によるリアルタイム進捗更新

### 在庫アラート機能
- [ ] 在庫切れ時の自動メール送信（管理者・担当者向け）
- [ ] 期限切れ商品のアラートメール（バッチ期限管理連携）
- [ ] 低在庫アラート（設定可能な閾値ベース）
- [ ] ActionMailer + Sidekiq による配信システム

---

## 📝 優先度別実装計画

### 【優先度：緊急】即座に対応が必要な機能

#### バッチ管理機能の完全実装
**期限**: 2週間以内
- [ ] バッチ詳細ページの実装
- [ ] バッチCRUD機能の追加
- [ ] 期限切れアラート機能
- [ ] 先入先出（FIFO）自動消費機能
- [ ] バッチ履歴・トレーサビリティ機能

#### APIセキュリティ強化
**期限**: 1週間以内
- [ ] APIレート制限機能の実装
- [ ] 認証機能強化（2FA対応検討）
- [ ] CORS設定の適切な管理
- [ ] API認証トークンの有効期限管理

---

### 【優先度：高】テスト品質・信頼性向上

#### Job/ActionCableテストの修復
**担当者**: バックエンドチーム  
**期限**: 3週間以内

- [ ] Redis Mock設定の実装との整合性確認
- [ ] ActionCable.server.broadcast の呼び出しタイミング修正
- [ ] Sidekiq inline mode でのエラーハンドリングテスト改善
- [ ] ファイルクリーンアップ処理の環境別テスト修正
- [ ] 進捗追跡機能のテスト実装とRedis連携確認

#### Feature Tests（E2E）安定化
**担当者**: QAチーム  
**期限**: 4週間以内

- [ ] Selenium WebDriver の設定最適化
- [ ] JavaScript非同期処理の適切な待機処理
- [ ] テストデータのセットアップ・クリーンアップ改善
- [ ] UIコンポーネントの存在確認とレスポンシブテスト
- [ ] ブラウザ間互換性テスト（Chrome/Firefox/Safari）

#### エラーハンドリングテストの包括実装
**担当者**: フルスタックチーム  
**期限**: 2週間以内

- [ ] HTTPステータスコード網羅的テスト（400,401,403,404,409,422,429,500）
- [ ] JSON API形式レスポンスの一貫性自動検証
- [ ] 多言語エラーメッセージの自動テスト
- [ ] カスタムエラークラスの完全テストカバレッジ
- [ ] エラーログ記録とSentry連携テスト

#### セキュリティテスト自動化
**担当者**: セキュリティチーム  
**期限**: 3週間以内

- [ ] OWASP Top 10対応の包括的自動テスト
- [ ] XSS/CSRF/SQLインジェクション脆弱性の継続的検証
- [ ] 認証・認可システムの境界値テスト
- [ ] 定期的な脆弱性スキャンの自動化
- [ ] ペネトレーションテストの実施

#### パフォーマンステスト実装
**担当者**: パフォーマンスチーム  
**期限**: 4週間以内

- [ ] N+1問題自動検出とクエリ効率測定
- [ ] 大量データ処理時のメモリ使用量監視
- [ ] レート制限機能の負荷テスト
- [ ] データベースクエリの継続的最適化
- [ ] キャッシュ効率とヒット率の分析

---

### 【優先度：中】中期実装計画

#### 在庫一括操作機能
**期限**: 6週間以内
- [ ] 在庫一括操作機能（一括ステータス変更、一括削除）
- [ ] 在庫レポート機能（月次・年次レポート、在庫回転率）
- [ ] エクスポート機能（PDF、Excel、CSV）
- [ ] 在庫履歴・監査ログ機能
- [ ] KPI ダッシュボード機能

#### 国際化・多言語対応
**担当者**: フロントエンドチーム  
**期限**: 8週間以内

- [ ] エラーメッセージの完全多言語化（英語・中国語・韓国語）
- [ ] タイムゾーン対応とロケール自動検出
- [ ] 通貨・日付形式の地域別カスタマイズ
- [ ] 多言語データベースコンテンツの管理
- [ ] RTL（右書き）言語対応の検討

#### CI/CD最適化
**担当者**: DevOpsチーム  
**期限**: 6週間以内

- [ ] GitHub Actions パイプラインの並列化
- [ ] テストカバレッジ自動計測とレポート生成
- [ ] セキュリティスキャン結果のSlack/Teams自動通知
- [ ] 失敗パターンの自動分類と改善提案
- [ ] Docker Image最適化とキャッシュ戦略

#### 監視・アラート機能
**担当者**: インフラチーム  
**期限**: 8週間以内

- [ ] Sentry/DataDog連携によるエラー追跡強化
- [ ] パフォーマンス劣化の自動検知
- [ ] テスト実行時間推移の分析・改善
- [ ] 外部依存サービス（Redis/MySQL）の接続監視
- [ ] アプリケーションメトリクスの可視化

---

### 【優先度：低】長期戦略・アーキテクチャ改善

#### キャッシュ戦略
**期限**: 12週間以内
- [ ] Redis活用の包括的キャッシュ戦略
- [ ] CDN連携による静的コンテンツ配信最適化
- [ ] 非同期処理の効率化とワーカー最適化
- [ ] メモリ使用量の継続的監視・改善

#### API Gateway導入検討
**期限**: 16週間以内
- [ ] マイクロサービス化の検討・段階的移行
- [ ] API Gateway導入とサービス間通信最適化
- [ ] イベント駆動アーキテクチャの導入検討
- [ ] クラウドネイティブ技術（Kubernetes）への移行準備
- [ ] データベース分散化・読み書き分離の実装

#### 開発者体験（DX）向上
**期限**: 20週間以内
- [ ] IDE統合とデバッグ支援ツールの充実
- [ ] 自動コードレビューとベストプラクティス強制
- [ ] ドキュメント自動生成と技術仕様書メンテナンス
- [ ] 新メンバーのオンボーディング自動化
- [ ] 技術的負債の可視化と計画的返済

---

## ⚡ 緊急対応事項

### セキュリティ・コンプライアンス強化
**即座に対応が必要**
- [ ] 認証・認可システムの定期監査
- [ ] データ暗号化とキー管理の強化
- [ ] GDPR/個人情報保護法対応の実装
- [ ] セキュリティインシデント対応プロセス

---

## 📊 進捗管理・KPI

### 開発メトリクス
- **テストカバレッジ目標**: 90%以上
- **コード品質スコア**: A評価以上（RuboCop基準）
- **CI/CDパイプライン実行時間**: 10分以内
- **セキュリティスキャン**: 毎週実行
- **パフォーマンステスト**: 毎月実行

### 品質管理指標
- **バグ検出率**: 月次測定
- **レスポンス時間**: 200ms以下維持
- **アップタイム**: 99.9%以上
- **セキュリティ脆弱性**: ゼロ件維持

---

## 📞 チーム連絡先・責任者

### チーム構成
- **プロジェクトマネージャー**: [担当者名]
- **フルスタック開発**: [担当者名]
- **フロントエンド**: [担当者名]
- **バックエンド**: [担当者名]
- **QAエンジニア**: [担当者名]
- **DevOpsエンジニア**: [担当者名]
- **セキュリティ専門家**: [担当者名]

### レビュープロセス
- **毎週金曜日**: 進捗レビュー会議
- **月初**: 月次計画策定
- **四半期**: 戦略見直し・優先度再評価

---

## 📋 関連ドキュメント

- [README.md](../README.md) - プロジェクト概要・セットアップ
- [Makefile](../Makefile) - 開発コマンド一覧
- [docs/api_documentation.md](./api_documentation.md) - API仕様書
- [docs/testing_strategy.md](./testing_strategy.md) - テスト戦略
- [docs/security_guidelines.md](./security_guidelines.md) - セキュリティガイドライン 