# StockRx CSVインポート テストデータ

在庫管理システムのCSVインポート機能をテストするためのサンプルデータです。

## 📁 ファイル一覧

### 1. `inventory_sample_basic.csv`
**用途**: 基本的なCSVインポート機能のテスト  
**データ内容**: オフィス用品（PC、周辺機器等）10件  
**特徴**: 
- 全て有効（active）ステータス
- 一般的な商品名・価格設定
- エラーなしの正常データ

### 2. `inventory_sample_advanced.csv`
**用途**: Apple製品を中心とした高価格帯商品のテスト  
**データ内容**: Apple製品・高級IT機器 20件  
**特徴**:
- 高価格帯商品（¥10,000〜¥1,000,000）
- 在庫切れ商品を含む（iPhone 15 Pro: 0個）
- アーカイブ商品を含む（Vision Pro）

### 3. `inventory_sample_edge_cases.csv`  
**用途**: エッジケース・特殊文字のテスト  
**データ内容**: 特殊ケース商品 15件  
**特徴**:
- 在庫切れ・少量在庫商品
- 商品名に特殊文字（カンマ、改行、記号）
- 小数点価格
- 非常に長い商品名
- アーカイブステータス商品

### 4. `inventory_sample_large.csv`
**用途**: 大量データ処理・パフォーマンステスト  
**データ内容**: IT機器・オフィス用品 50件  
**特徴**:
- 中規模データセット
- 多様な商品カテゴリ
- 現実的な在庫数・価格設定

### 5. `inventory_sample_errors.csv`
**用途**: エラーハンドリング・バリデーションテスト  
**データ内容**: 意図的なエラーを含む商品データ 15件  
**特徴**:
- **空の商品名**（バリデーションエラー）
- **マイナス在庫・価格**（ビジネスルールエラー）
- **文字列の数量・価格**（型変換エラー）
- **不正ステータス値**（列挙型エラー）
- **カラム数不一致**（フォーマットエラー）
- **空行**（データ整合性テスト）

## 🚀 使用方法

### 1. 基本テスト手順
```bash
# Dockerコンテナ起動
make up

# ブラウザでアクセス
http://localhost:3000/admin/inventories/import

# ファイル選択またはドラッグ&ドロップ
```

### 2. テストケース別推奨順序
1. **`inventory_sample_basic.csv`**: 正常動作確認
2. **`inventory_sample_advanced.csv`**: 多様データ処理確認
3. **`inventory_sample_edge_cases.csv`**: 特殊ケース処理確認
4. **`inventory_sample_errors.csv`**: エラーハンドリング確認
5. **`inventory_sample_large.csv`**: パフォーマンス確認

### 3. 期待する動作

#### ✅ 正常処理されるべきデータ
- 基本的な商品情報（名前、数量、価格）
- active/archivedステータス
- 日本語商品名
- 特殊文字を含む商品名（適切にエスケープ）
- ゼロ在庫商品

#### ❌ エラーとなるべきデータ
- 空の商品名
- マイナス在庫・価格
- 文字列の数量・価格
- 不正なステータス値
- カラム数不一致

## 📊 テスト結果確認項目

### 1. インポート完了後の確認
- [ ] 在庫一覧画面での表示確認
- [ ] 各商品の詳細情報確認
- [ ] ステータスバッジの表示確認
- [ ] 在庫切れアラートの表示確認

### 2. エラーハンドリング確認
- [ ] エラー行のスキップ動作
- [ ] エラーメッセージの表示
- [ ] 部分的インポート成功の処理

### 3. パフォーマンス確認
- [ ] 大量データ処理時間
- [ ] メモリ使用量
- [ ] UI応答性

## 🔧 カスタマイズ

新しいテストケースを追加する場合は、以下の形式でCSVを作成してください：

```csv
name,quantity,price,status
商品名,数量(整数),価格(整数/小数),ステータス(active/archived)
```

### 必須カラム
- `name`: 商品名（文字列、必須）
- `quantity`: 数量（0以上の整数、必須）
- `price`: 価格（0以上の数値、必須）

### 任意カラム  
- `status`: ステータス（`active` または `archived`、省略時は `active`）

## 📝 注意事項

- ファイルは**UTF-8**エンコーディングで保存してください
- 最大ファイルサイズ: **10MB**
- 大量データ（1万行以上）の場合、処理に時間がかかります
- インポート中は他の操作を避けてください

## 🐛 既知の問題・制限事項

- 非常に長い商品名（255文字超）は切り詰められる可能性があります
- 同一商品名の重複処理は最後の行が有効になります
- 商品名にHTML特殊文字が含まれる場合、エスケープ処理が適用されます