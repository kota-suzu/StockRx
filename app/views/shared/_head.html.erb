<%# ========================================== %>
<%# çµ±ä¸€Headã‚»ã‚¯ã‚·ãƒ§ãƒ³ - StockRx %>
<%# ========================================== %>
<%# CLAUDE.mdæº–æ‹ : å…¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã®é‡è¤‡è§£æ¶ˆã¨ä¸€è²«æ€§ç¢ºä¿ %>
<%# ãƒ¡ã‚¿èªçŸ¥: Bootstrapèª­ã¿è¾¼ã¿ã€ãƒ¡ã‚¿ã‚¿ã‚°ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã®çµ±ä¸€ç®¡ç† %>
<%# æ¨ªå±•é–‹: application.html.erbã€admin.html.erbã€store.html.erbç­‰ã§å…±é€šåˆ©ç”¨ %>
<%# ========================================== %>

<%# åŸºæœ¬ãƒ¡ã‚¿ã‚¿ã‚°ï¼ˆå…¨ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå…±é€šï¼‰ %>
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta charset="utf-8">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="description" content="<%= content_for?(:description) ? yield(:description) : 'StockRx - ãƒ¢ãƒ€ãƒ³ãªåœ¨åº«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ' %>">
<meta name="author" content="StockRx Team">

<%# Railsæ¨™æº–ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¿ã‚° %>
<%= csrf_meta_tags %>
<%= csp_meta_tag %>

<%# ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå›ºæœ‰ã®Headæ‹¡å¼µãƒã‚¤ãƒ³ãƒˆ %>
<%= yield :head %>

<%# PWAå¯¾å¿œï¼ˆå…¬é–‹ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®ã¿ï¼‰ %>
<% if content_for?(:pwa_support) || controller.class.name.start_with?('Home') %>
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" href="/icon.png" type="image/png">
  <link rel="icon" href="/icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/icon.png">
<% end %>

<%# ========================================== %>
<%# CSSèª­ã¿è¾¼ã¿çµ±ä¸€ç®¡ç† %>
<%# ========================================== %>

<%# ãƒ¡ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆï¼ˆçµ±ä¸€ã•ã‚ŒãŸ_variables.scssã€_mixins.scssã‚’å«ã‚€ï¼‰ %>
<%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>

<%# ========================================== %>
<%# ã‚¢ã‚¤ã‚³ãƒ³ã‚·ã‚¹ãƒ†ãƒ çµ±ä¸€ç®¡ç† %>
<%# ========================================== %>

<%# Bootstrap Iconsï¼ˆãƒ—ãƒ©ã‚¤ãƒãƒªã‚¢ã‚¤ã‚³ãƒ³ã‚·ã‚¹ãƒ†ãƒ ï¼‰ %>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

<%# Font Awesomeï¼ˆæ¡ä»¶ä»˜ãèª­ã¿è¾¼ã¿ï¼‰ %>
<% if content_for?(:use_font_awesome) %>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<% end %>

<%# ========================================== %>
<%# å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼ˆæ¡ä»¶ä»˜ãèª­ã¿è¾¼ã¿ï¼‰ %>
<%# ========================================== %>

<%# Chart.jsï¼ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ»åˆ†æç”»é¢ç”¨ï¼‰ %>
<% if content_for?(:use_chartjs) %>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<% end %>

<%# FullCalendarï¼ˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½ç”¨ï¼‰ %>
<% if content_for?(:use_fullcalendar) %>
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.js"></script>
<% end %>

<%# DataTablesï¼ˆé«˜åº¦ãªãƒ†ãƒ¼ãƒ–ãƒ«æ©Ÿèƒ½ç”¨ï¼‰ %>
<% if content_for?(:use_datatables) %>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
<% end %>

<%# ========================================== %>
<%# JavaScriptèª­ã¿è¾¼ã¿çµ±ä¸€ç®¡ç† %>
<%# ========================================== %>

<%# Rails ImportMapï¼ˆçµ±ä¸€JavaScriptç®¡ç†ï¼‰ %>
<%= javascript_importmap_tags %>

<%# ========================================== %>
<%# ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ¥ã‚¹ã‚¿ã‚¤ãƒ«æ‹¡å¼µãƒã‚¤ãƒ³ãƒˆ %>
<%# ========================================== %>

<%# ç®¡ç†è€…ç”»é¢å›ºæœ‰ã‚¹ã‚¿ã‚¤ãƒ« %>
<% if content_for?(:admin_styles) %>
  <style>
    body { --section-primary: var(--admin-primary); --section-secondary: var(--admin-secondary); --section-accent: var(--admin-accent); }
  </style>
<% end %>

<%# åº—èˆ—ç”»é¢å›ºæœ‰ã‚¹ã‚¿ã‚¤ãƒ« %>
<% if content_for?(:store_styles) %>
  <style>
    body { --section-primary: var(--store-primary); --section-secondary: var(--store-secondary); --section-accent: var(--store-accent); }
  </style>
<% end %>

<%# å…¬é–‹ç”»é¢å›ºæœ‰ã‚¹ã‚¿ã‚¤ãƒ« %>
<% if content_for?(:public_styles) %>
  <style>
    body { --section-primary: var(--public-primary); --section-secondary: var(--public-secondary); --section-accent: var(--public-accent); }
  </style>
<% end %>

<%# ========================================== %>
<%# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–è¨­å®š %>
<%# ========================================== %>

<%# DNS ãƒ—ãƒªãƒ•ã‚§ãƒƒãƒï¼ˆå¤–éƒ¨ãƒªã‚½ãƒ¼ã‚¹é«˜é€ŸåŒ–ï¼‰ %>
<link rel="dns-prefetch" href="//cdn.jsdelivr.net">
<link rel="dns-prefetch" href="//cdnjs.cloudflare.com">

<%# ãƒªã‚½ãƒ¼ã‚¹ãƒ’ãƒ³ãƒˆï¼ˆé‡è¦ãªãƒªã‚½ãƒ¼ã‚¹ã®äº‹å‰èª­ã¿è¾¼ã¿ï¼‰ %>
<% if content_for?(:preload_resources) %>
  <%= yield(:preload_resources) %>
<% end %>

<%# ========================================== %>
<%# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–è¨­å®š %>
<%# ========================================== %>

<%# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆæ®µéšçš„å®Ÿè£…ï¼‰ %>
<% if content_for?(:security_headers) %>
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="X-Frame-Options" content="DENY">
  <meta http-equiv="X-XSS-Protection" content="1; mode=block">
  <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
<% end %>

<%# ========================================== %>
<%# é–‹ç™ºãƒ»ãƒ‡ãƒãƒƒã‚°æ”¯æ´ %>
<%# ========================================== %>

<%# é–‹ç™ºç’°å¢ƒã§ã®ãƒ‡ãƒãƒƒã‚°æƒ…å ± %>
<% if Rails.env.development? %>
  <!-- Layout: <%= controller.class.name %> -->
  <!-- User Agent: <%= request.user_agent %> -->
  <!-- Current User: <%= current_admin&.email || current_store_user&.email || 'Guest' %> -->
<% end %>

<%# ========================================== %>
<%# ä½¿ç”¨æ–¹æ³•ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ %>
<%# ========================================== %>

<%# 
  ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã®ä½¿ç”¨ä¾‹:
  
  <head>
    <title><%= content_for(:title) || "StockRx" %></title>
    <%= render 'shared/head' %>
  </head>
  
  æ¡ä»¶ä»˜ãæ©Ÿèƒ½æœ‰åŠ¹åŒ–:
  
  <% content_for :use_chartjs do %>true<% end %>
  <% content_for :use_font_awesome do %>true<% end %>
  <% content_for :admin_styles do %>true<% end %>
  
  ã‚«ã‚¹ã‚¿ãƒ headè¦ç´ è¿½åŠ :
  
  <% content_for :head do %>
    <meta name="robots" content="noindex">
    <link rel="canonical" href="<%= request.url %>">
  <% end %>
  
  ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ˜ãƒƒãƒ€ãƒ¼æœ‰åŠ¹åŒ–:
  
  <% content_for :security_headers do %>true<% end %>
%>

<%# ========================================== %>
<%# TODO: ğŸŸ¡ Phase 3ï¼ˆé‡è¦ï¼‰- é«˜åº¦ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– %>
<%# å„ªå…ˆåº¦: ä¸­ï¼ˆåŸºæœ¬çµ±åˆå®Œäº†å¾Œï¼‰ %>
<%# å®Ÿè£…å†…å®¹: %>
<%#   - Critical CSS ã®ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³åŒ– %>
<%#   - ä½¿ç”¨ã—ãªã„CSS/JSã®å‹•çš„é™¤å¤– %>
<%#   - Service Worker çµ±åˆ %>
<%#   - WebPç”»åƒå¯¾å¿œ %>
<%#   - HTTP/2 Push å¯¾å¿œ %>
<%# æœŸå¾…åŠ¹æœ: ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿é€Ÿåº¦30%å‘ä¸Šã€Lighthouse ã‚¹ã‚³ã‚¢æ”¹å–„ %>
<%# å·¥æ•°è¦‹ç©: 2-3æ—¥ %>
<%# ä¾å­˜é–¢ä¿‚: WebPack/Importmapæœ€é©åŒ–ã€Service Workerå®Ÿè£… %>
<%# ========================================== %>