<!DOCTYPE html>
<html>
  <head>
    <title>StockRx - 管理者パネル</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>

  <body class="admin-layout">
    <header class="admin-header">
      <div class="brand">
        <%= link_to admin_root_path, class: "brand-link" do %>
          📦 StockRx 管理パネル
        <% end %>
      </div>
      <% if admin_signed_in? %>
        <nav class="admin-nav">
          <%= link_to admin_root_path, class: "nav-link #{'active' if current_page?(admin_root_path)}" do %>
            🏠 ダッシュボード
          <% end %>
          <%= link_to admin_inventories_path, class: "nav-link #{'active' if current_page?(admin_inventories_path)}" do %>
            📦 在庫管理
          <% end %>
          <%= link_to inventory_logs_path, class: "nav-link #{'active' if current_page?(inventory_logs_path)}" do %>
            📋 在庫履歴
          <% end %>
          <%= link_to admin_migrations_path, class: "nav-link #{'active' if controller_name == 'migrations'}" do %>
            🔄 マイグレーション
          <% end %>
          <%= link_to "/admin/sidekiq", class: "nav-link", target: "_blank" do %>
            ⚙️ ジョブ監視
          <% end %>
          
          <div class="nav-divider"></div>
          
          <div class="user-menu">
            <div class="user-info">
              <span class="user-email"><%= current_admin.email %></span>
            </div>
            <%= button_to destroy_admin_session_path, method: :delete, class: "logout-btn", title: "ログアウト" do %>
              🚪 ログアウト
            <% end %>
          </div>
        </nav>
      <% end %>
    </header>

    <main class="admin-content">
      <% flash.each do |key, value| %>
        <div class="alert alert-<%= key %>">
          <%= value %>
        </div>
      <% end %>

      <%= yield %>
    </main>

    <footer class="admin-footer">
      <p>&copy; <%= Date.today.year %> StockRx - 管理者パネル V1.0</p>
    </footer>
  </body>
</html> 