<%# Bootstrap 5 ãƒ¢ãƒ€ãƒ³ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ - StockRx ç®¡ç†è€…èªè¨¼ %>
<div class="min-vh-100 d-flex align-items-center justify-content-center py-5" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-12 col-md-6 col-lg-5 col-xl-4">
        
        <%# ãƒ–ãƒ©ãƒ³ãƒ‰ãƒ˜ãƒƒãƒ€ãƒ¼ %>
        <div class="text-center mb-4">
          <div class="mb-3">
            <div class="bg-white rounded-circle d-inline-flex align-items-center justify-content-center shadow-lg" style="width: 80px; height: 80px;">
              <i class="fas fa-boxes-stacked fa-2x text-primary"></i>
            </div>
          </div>
          <h1 class="h3 mb-2 fw-bold text-white">StockRx ç®¡ç†ç”»é¢</h1>
          <p class="text-white-50 mb-0">åœ¨åº«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </p>
        </div>

        <%# ãƒ­ã‚°ã‚¤ãƒ³ã‚«ãƒ¼ãƒ‰ %>
        <div class="card shadow-lg border-0 overflow-hidden">
          <div class="card-header bg-primary text-white text-center py-4 position-relative">
            <div class="position-absolute top-0 start-0 w-100 h-100" style="background: linear-gradient(45deg, rgba(255,255,255,0.1) 25%, transparent 25%), linear-gradient(-45deg, rgba(255,255,255,0.1) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, rgba(255,255,255,0.1) 75%), linear-gradient(-45deg, transparent 75%, rgba(255,255,255,0.1) 75%); background-size: 20px 20px; background-position: 0 0, 0 10px, 10px -10px, -10px 0px; opacity: 0.3;"></div>
            <h2 class="h5 mb-0 position-relative">
              <i class="fas fa-sign-in-alt me-2"></i>ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³
            </h2>
          </div>
          
          <div class="card-body p-4">
            <%# ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã‚¨ãƒªã‚¢ %>
            <%= render "admin_controllers/shared/error_messages", resource: resource %>
            
            <%= form_for(resource, as: resource_name, url: session_path(resource_name), 
                         data: { turbo: false }, class: "needs-validation", novalidate: true) do |f| %>
              
              <%# ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹å…¥åŠ› %>
              <div class="mb-3">
                <%= f.label :email, "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹", class: "form-label fw-medium text-dark" %>
                <div class="input-group input-group-lg">
                  <span class="input-group-text bg-light border-end-0">
                    <i class="fas fa-envelope text-primary"></i>
                  </span>
                  <%= f.email_field :email, 
                      autofocus: true, 
                      autocomplete: "email",
                      class: "form-control border-start-0 ps-0",
                      placeholder: "admin@example.com",
                      style: "box-shadow: none; border-color: #ced4da;",
                      required: true %>
                  <div class="invalid-feedback">
                    æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚
                  </div>
                </div>
              </div>

              <%# ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ› %>
              <div class="mb-3">
                <%= f.label :password, "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰", class: "form-label fw-medium text-dark" %>
                <div class="input-group input-group-lg">
                  <span class="input-group-text bg-light border-end-0">
                    <i class="fas fa-lock text-primary"></i>
                  </span>
                  <%= f.password_field :password, 
                      autocomplete: "current-password",
                      class: "form-control border-start-0 ps-0",
                      placeholder: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›",
                      style: "box-shadow: none; border-color: #ced4da;",
                      required: true %>
                  <button class="btn btn-outline-secondary border-start-0" type="button" id="togglePassword" style="border-color: #ced4da;">
                    <i class="fas fa-eye" id="toggleIcon"></i>
                  </button>
                  <div class="invalid-feedback">
                    ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚
                  </div>
                </div>
              </div>

              <%# ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ä¿æŒ %>
              <% if devise_mapping.rememberable? %>
                <div class="mb-4">
                  <div class="form-check">
                    <%= f.check_box :remember_me, class: "form-check-input" %>
                    <%= f.label :remember_me, "ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ã‚’ä¿æŒã™ã‚‹", class: "form-check-label text-muted" %>
                  </div>
                </div>
              <% end %>

              <%# ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ %>
              <div class="d-grid mb-3">
                <%= f.submit "ãƒ­ã‚°ã‚¤ãƒ³", 
                    class: "btn btn-primary btn-lg fw-medium py-3",
                    style: "background: linear-gradient(45deg, #007bff, #0056b3); border: none; box-shadow: 0 4px 15px rgba(0, 123, 255, 0.3);",
                    data: { 
                      disable_with: '<i class="fas fa-spinner fa-spin me-2"></i>ãƒ­ã‚°ã‚¤ãƒ³ä¸­...' 
                    } %>
              </div>
            <% end %>

            <%# GitHubã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ­ã‚°ã‚¤ãƒ³ %>
            <div class="text-center">
              <div class="d-flex align-items-center mb-3">
                <hr class="flex-grow-1 opacity-25">
                <span class="px-3 text-muted small fw-medium">ã¾ãŸã¯</span>
                <hr class="flex-grow-1 opacity-25">
              </div>
              
              <%= link_to admin_omniauth_authorize_path(:github), 
                  method: :post,
                  class: "btn btn-outline-dark btn-lg w-100 py-3",
                  style: "border: 2px solid #333; transition: all 0.3s ease;",
                  onmouseover: "this.style.backgroundColor='#333'; this.style.color='white'; this.style.transform='translateY(-2px)';",
                  onmouseout: "this.style.backgroundColor='transparent'; this.style.color='#333'; this.style.transform='translateY(0)';",
                  data: { turbo: false } do %>
                <i class="fab fa-github me-2"></i>GitHubã§ãƒ­ã‚°ã‚¤ãƒ³
              <% end %>
            </div>
          </div>
          
          <%# ãƒ•ãƒƒã‚¿ãƒ¼ãƒªãƒ³ã‚¯ %>
          <div class="card-footer bg-light text-center py-3">
            <%= render "admin_controllers/shared/links" %>
          </div>
        </div>

        <%# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æƒ…å ± %>
        <div class="text-center mt-4">
          <small class="text-white-50">
            <i class="fas fa-shield-alt me-1"></i>
            ã“ã®ã‚µã‚¤ãƒˆã¯ SSL ã§ä¿è­·ã•ã‚Œã¦ã„ã¾ã™
          </small>
        </div>
        
        <%# TODO: ğŸŸ¡ Phase 2 - ãƒ­ã‚°ã‚¤ãƒ³è©¦è¡Œå›æ•°åˆ¶é™è¡¨ç¤º %>
        <%# å„ªå…ˆåº¦: ä¸­ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å‘ä¸Šï¼‰ %>
        <%# å®Ÿè£…å†…å®¹: æ®‹ã‚Šè©¦è¡Œå›æ•°ã€ãƒ­ãƒƒã‚¯æ™‚é–“ã®è¡¨ç¤º %>
        <%# ç†ç”±: ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£å‘ä¸Šã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ„è­˜å‘ä¸Š %>
        <%# æœŸå¾…åŠ¹æœ: ãƒ–ãƒ«ãƒ¼ãƒˆãƒ•ã‚©ãƒ¼ã‚¹æ”»æ’ƒæŠ‘åˆ¶ %>
        <%# å·¥æ•°è¦‹ç©: 1æ—¥ %>
        <%# ä¾å­˜é–¢ä¿‚: Devise lockableè¨­å®šã®è©³ç´°åŒ– %>

        <%# TODO: ğŸ”´ Phase 5ï¼ˆç·Šæ€¥ï¼‰- èªè¨¼UIåå‰ç©ºé–“çµ±åˆè¨ˆç”» %>
        <%# å„ªå…ˆåº¦: é«˜ï¼ˆãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹æ€§ãƒ»ä¸€è²«æ€§å‘ä¸Šï¼‰ %>
        <%# å®Ÿè£…å†…å®¹: %>
        <%#   - adminsåå‰ç©ºé–“ã®admin_controllersçµ±åˆ %>
        <%#   - é‡è¤‡ãƒ“ãƒ¥ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã®å‰Šé™¤ï¼ˆadmins/sessions, admins/passwordsç­‰ï¼‰ %>
        <%#   - ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®šã®æ•´ç†ãƒ»ç°¡ç´ åŒ– %>
        <%#   - Deviseã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼è¨­å®šã®çµ±ä¸€ %>
        <%# ç†ç”±: ç¾åœ¨admin_controllersã¨adminsã®2ã¤ã®åå‰ç©ºé–“ã§èªè¨¼UIé‡è¤‡ %>
        <%# æœŸå¾…åŠ¹æœ: %>
        <%#   - UIä¸€è²«æ€§ç¢ºä¿ %>
        <%#   - ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹è² è·å‰Šæ¸› %>
        <%#   - é–‹ç™ºè€…æ··ä¹±ã®è§£æ¶ˆ %>
        <%#   - ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ç°¡ç´ åŒ– %>
        <%# å·¥æ•°è¦‹ç©: 2-3æ—¥ %>
        <%# æ¨ªå±•é–‹: passwords, confirmationsç­‰ã®ä»–èªè¨¼ç”»é¢ã‚‚åŒæ§˜çµ±åˆ %>

      </div>
    </div>
  </div>
</div>

<%# Enhanced JavaScript for improved UX %>
<script>
(function() {
  'use strict';
  window.addEventListener('load', function() {
    // ãƒ•ã‚©ãƒ¼ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
    var forms = document.getElementsByClassName('needs-validation');
    var validation = Array.prototype.filter.call(forms, function(form) {
      form.addEventListener('submit', function(event) {
        if (form.checkValidity() === false) {
          event.preventDefault();
          event.stopPropagation();
        }
        form.classList.add('was-validated');
      }, false);
    });

    // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
    const togglePassword = document.getElementById('togglePassword');
    const passwordField = document.getElementById('admin_password');
    const toggleIcon = document.getElementById('toggleIcon');

    if (togglePassword && passwordField && toggleIcon) {
      togglePassword.addEventListener('click', function() {
        const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordField.setAttribute('type', type);
        
        // ã‚¢ã‚¤ã‚³ãƒ³åˆ‡ã‚Šæ›¿ãˆ
        if (type === 'text') {
          toggleIcon.classList.remove('fa-eye');
          toggleIcon.classList.add('fa-eye-slash');
        } else {
          toggleIcon.classList.remove('fa-eye-slash');
          toggleIcon.classList.add('fa-eye');
        }
      });
    }

    // å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹åŠ¹æœ
    const inputGroups = document.querySelectorAll('.input-group');
    inputGroups.forEach(function(group) {
      const input = group.querySelector('input');
      if (input) {
        input.addEventListener('focus', function() {
          group.style.boxShadow = '0 0 0 0.25rem rgba(13, 110, 253, 0.25)';
          group.style.borderColor = '#86b7fe';
        });
        
        input.addEventListener('blur', function() {
          group.style.boxShadow = 'none';
          group.style.borderColor = '#ced4da';
        });
      }
    });

    // ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã®ãƒ›ãƒãƒ¼åŠ¹æœ
    const loginBtn = document.querySelector('input[type="submit"]');
    if (loginBtn) {
      loginBtn.addEventListener('mouseenter', function() {
        this.style.transform = 'translateY(-2px)';
        this.style.boxShadow = '0 6px 20px rgba(0, 123, 255, 0.4)';
      });
      
      loginBtn.addEventListener('mouseleave', function() {
        this.style.transform = 'translateY(0)';
        this.style.boxShadow = '0 4px 15px rgba(0, 123, 255, 0.3)';
      });
    }
  }, false);
})();
</script> 